{
  "logging": {
    "logs": {
      "default": {
        "level": "$SAML_CLIENT_LOGLEVEL"
      }
    }
  },
  "apps": {
    "tls": {
    },
    "http": {
      "servers": {
        "srv${LISTEN_PORT}": {
          "listen": [
            ":${LISTEN_PORT}"
          ],
          "routes": [
            {
              "match": [
                {
                  "path": [
                    "/"
                  ]
                }
              ],
              "handle": [
                {
                  "handler": "samlprovider",
                  "session_header_name": "${SAML_SESSION_HEADER}",
                  "mongo_host": "${MONGO_HOST}",
                  "mongo_db": "${MONGO_DATABASE}",
                  "audience_restriction": "${SAML_AUDIENCE_RESTRICTION}",
                  "idp_metadata_url": "${SAML_IDP_METADATAURL}",
                  "entityId": "${SAML_ENTITY_ID}",
                  "sign_authn_req": "${SAML_SIGN_AUTH_REQUEST}",
                  "sign_cert_file": "${SAML_SIGN_CERT_FILE}",
                  "sign_key_file": "${SAML_SIGN_KEY_FILE}",
                  "assertion_consumer_url": "${SAML_ASSERTION_CONSUMER_URL}",
                  "slo_consumer_url": "${SAML_SLO_CONSUMER_URL}",
                  "cookie_domain": "${SAML_COOKIE_DOMAIN}",
                  "cookie_path": "${SAML_COOKIE_PATH}",
                  "callback_url": "${SAML_CALLBACK_URL}",
                  "metadata_url": "${SAML_METADATA_URL}",
                  "logout_url": "${SAML_LOGOUT_URL}"
                },
                {
                  "handler": "reverse_proxy",
                  "transport": {
                    "protocol": "http",
                    "read_buffer_size": 4096
                  },
                  "upstreams": [
                    {
                      "dial": "${SAML_BACKEND_HOST}:${SAML_BACKEND_PORT}"
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    }
  }
}
